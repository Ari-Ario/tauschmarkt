import{_ as te,u as se,r,C as oe,a as q,o as n,c as a,b as f,d as e,f as B,v as I,F as p,m as w,h as ie,l as x,t as c,w as K,e as M,n as ne,q as C,D as N,P as ae,k as A,p as re,g as le,S as u}from"./app-DWDepuyr.js";import{H as ce}from"./Header-uGPwPHI4.js";import{F as de}from"./FooterUser-D-P54XrN.js";import{u as ue}from"./CartList.vue_vue_type_style_index_0_scoped_444ccb5a_lang-DKL6o_VH.js";/* empty css                                                                   */const d=b=>(re("data-v-8726c10d"),b=b(),le(),b),me={class:"bg-white container"},pe={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},he={"aria-labelledby":"products-heading",class:"pb-24 pt-6"},ve={class:"prise-form"},_e={class:"hidden lg:block"},ge={class:"flex items-center justify-between space-x-3"},fe=d(()=>e("h3",{class:"sr-only"},"Preis:",-1)),we={class:"basis-1/3"},xe=d(()=>e("label",{for:"filters-price-from",class:"mb-2 block text-sm font-medium text-gray-900 dark:text-white"},"Von",-1)),be={class:"basis-1/3"},ke=d(()=>e("label",{for:"filters-price-to",class:"mb-2 block text-sm font-medium text-gray-900 dark:text-white"},"Bis",-1)),ye={class:"lg:col-span-3"},qe={class:"product-list"},Ce={class:"product-info"},Te={key:0},Pe={key:1},Ze=["src"],Be={class:"product-actions"},Ie=["onClick"],Me=d(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#298E46"},[e("path",{d:"M480-320q75 0 127.5-52.5T660-500q0-75-52.5-127.5T480-680q-75 0-127.5 52.5T300-500q0 75 52.5 127.5T480-320Zm0-72q-45 0-76.5-31.5T372-500q0-45 31.5-76.5T480-608q45 0 76.5 31.5T588-500q0 45-31.5 76.5T480-392Zm0 192q-146 0-266-81.5T40-500q54-137 174-218.5T480-800q146 0 266 81.5T920-500q-54 137-174 218.5T480-200Zm0-300Zm0 220q113 0 207.5-59.5T832-500q-50-101-144.5-160.5T480-720q-113 0-207.5 59.5T128-500q50 101 144.5 160.5T480-280Z"})],-1)),Se=[Me],$e=["onClick"],Fe=d(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#298E46"},[e("path",{d:"m363-390 117-71 117 71-31-133 104-90-137-11-53-126-53 126-137 11 104 90-31 133ZM80-80v-720q0-33 23.5-56.5T160-880h640q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240H240L80-80Zm126-240h594v-480H160v525l46-45Zm-46 0v-480 480Z"})],-1)),He=[Fe],Re=["onClick"],Ee=d(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#298E46"},[e("path",{d:"M240-80q-33 0-56.5-23.5T160-160v-480q0-33 23.5-56.5T240-720h80q0-66 47-113t113-47q66 0 113 47t47 113h80q33 0 56.5 23.5T800-640v480q0 33-23.5 56.5T720-80H240Zm0-80h480v-480h-80v80q0 17-11.5 28.5T600-520q-17 0-28.5-11.5T560-560v-80H400v80q0 17-11.5 28.5T360-520q-17 0-28.5-11.5T320-560v-80h-80v480Zm160-560h160q0-33-23.5-56.5T480-800q-33 0-56.5 23.5T400-720ZM240-160v-480 480Z"})],-1)),Ve=[Ee],Ue={class:"broadcast"},Ke={class:"carousel__item"},Ne=["src"],Ae={class:"review-section"},De=d(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#298E46"},[e("path",{d:"m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"})],-1)),Le=[De],je={class:"stars"},ze=["src"],Oe={class:"review-header"},Xe={class:"stars"},Ge=["onClick"],Je={class:"comment-box"},Qe=d(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"40px",viewBox:"0 -960 960 960",width:"40px",fill:"#298E46"},[e("path",{d:"M120-160v-640l760 320-760 320Zm66.67-102 520.66-218-520.66-220v158.67L428-480l-241.33 60v158Zm0 0v-438 438Z"})],-1)),We=[Qe],Ye={class:"comments-list"},et={class:"comment-part"},tt={style:{"text-align":"left"}},st=["onClick"],ot={key:0,xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#EA3323"},it=d(()=>e("path",{d:"M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"},null,-1)),nt=[it],at={class:"footer"},rt={__name:"Index",props:{products:Array},setup(b){const k=se(),D=ie().currentRoute.value.params.id,S=r([]),$=r([]),h=r({prices:[0,1e4]});r(!1);const T=r(!1),F=r([]),L=async()=>{try{const t=await x.get(`/api/product/${D}`);S.value=t.data.products.data,H()}catch(t){console.error("Failed to fetch Product:",t)}},H=()=>{const[t,s]=h.value.prices;$.value=S.value.filter(l=>l.price>=t&&l.price<=s)},j=t=>{F.value=t.product_images,T.value=!0},z=()=>{T.value=!1};function R(t){return t.product_images&&t.product_images.length>0?`/${t.product_images[0].image}`:"../assets/Placeholder-enterprise.png"}oe(()=>{L()});const{addToCart:O}=ue(),X=t=>{const s=document.querySelector('meta[name="csrf-token"]').getAttribute("content");x.post(`/api/cart/store/${t.id}`,t,{quantity:t.quantity,price:t.price,seller_id:t.seller_id},{headers:{"Content-Type":"multipart/form-data","X-CSRF-TOKEN":s}}).then(l=>{const g=l.data.flash;g&&g.success&&u.fire({toast:!0,icon:"success",position:"top-end",showConfirmButton:!1,title:g.success,timer:3e3}),O(t)}).catch(l=>{console.error("Error adding to cart:",l)})},m=r([]),E=r(0),P=r(!1),y=r({}),v=r(""),_=r(0),Z=async t=>{y.value=t;try{const s=await x.get(`/api/product-review/${t.id}`);m.value=s.data,console.log(m.value),G(),P.value=!0}catch(s){console.error("Failed to fetch reviews:",s)}},V=()=>{P.value=!1},G=()=>{const t=m.value.reduce((s,l)=>s+l.rating,0);E.value=m.value.length?(t/m.value.length).toFixed(1):0},J=async t=>{if(!k.authUser){u.fire({toast:!0,icon:"info",position:"top-end",showConfirmButton:!1,title:"Melden Sie sich an!",timer:3e3});return}if(!v.value.trim()||!_.value){u.fire({toast:!0,icon:"warning",position:"top-end",showConfirmButton:!1,title:"entweder Sterne oder Komment is leer!",timer:3e3});return}document.querySelector('meta[name="csrf-token"]').getAttribute("content");try{await x.post("/api/product-review",{user_id:k.authUser.id,product_id:t.id,comment:v.value,rating:_.value}),v.value="",_.value=0,await Z(t),u.fire({toast:!0,icon:"success",position:"top-end",showConfirmButton:!1,title:"Ihre Kommnt wurde gepostet!",timer:3e3})}catch(s){console.error("Failed to submit comment:",s),u.fire({toast:!0,icon:"error",position:"top-end",showConfirmButton:!1,title:"Komment wurde nicht gepostet!"})}},Q=async t=>{try{await x.delete(`/api/product-review/${t.id}`),u.fire({toast:!0,icon:"success",position:"top-end",showConfirmButton:!1,title:"Ihre Komment wurde gelöscht!",timer:3e3}),await Z(y)}catch(s){console.error("Failed to delete comment:",s),u.fire({toast:!0,icon:"error",position:"top-end",showConfirmButton:!1,title:"Komment wurde nicht gelöscht!"})}},W=t=>{_.value=t};return(t,s)=>{const l=q("Slide"),g=q("Navigation"),Y=q("Pagination"),ee=q("Carousel");return n(),a(p,null,[f(ce),e("div",me,[e("main",pe,[e("section",he,[e("div",ve,[e("form",_e,[e("div",ge,[fe,e("div",we,[xe,B(e("input",{type:"number",id:"filters-price-from",placeholder:"Min price","onUpdate:modelValue":s[0]||(s[0]=i=>h.value.prices[0]=i),class:"block w-full rounded-lg border border-gray-300"},null,512),[[I,h.value.prices[0]]])]),e("div",be,[ke,B(e("input",{type:"number",id:"filters-price-to",placeholder:"Max price","onUpdate:modelValue":s[1]||(s[1]=i=>h.value.prices[1]=i),class:"block w-full rounded-lg border border-gray-300"},null,512),[[I,h.value.prices[1]]])]),e("div",{class:"basis-1/3"},[e("button",{type:"button",onClick:H,class:"bt-1 mt-6 w-full rounded-lg bg-blue-500 px-4 py-2 text-white hover:bg-blue-700"},"Verwenden")])])])])]),e("div",ye,[e("div",qe,[(n(!0),a(p,null,w($.value,i=>(n(),a("div",{key:i.id,class:"product-card"},[e("div",Ce,[e("p",null,c(i.name),1),e("p",null,c(i.quantity)+" übrig",1),i.amount?(n(),a("p",Te,c(i.price)+"CHF /"+c(i.amount)+c(i.mass_unit),1)):(n(),a("p",Pe,c(i.price)+"CHF /"+c(i.mass_unit),1))]),e("img",{src:R(i),alt:"Product Image",class:"product-image"},null,8,Ze),e("div",Be,[e("button",{class:"product-buttons",onClick:o=>j(i)},Se,8,Ie),e("button",{class:"product-buttons",onClick:o=>Z(i)},He,8,$e),e("button",{onClick:o=>X(i)},Ve,8,Re)]),T.value?(n(),a("div",{key:0,class:"popupImages",onClick:s[2]||(s[2]=K(o=>z(),["self"]))},[e("div",Ue,[f(ee,null,{addons:M(()=>[f(g),f(Y)]),default:M(()=>[(n(!0),a(p,null,w(F.value,(o,U)=>(n(),ne(l,{key:o.id},{default:M(()=>[e("div",Ke,[e("img",{src:`/${o.image}`,alt:"Product Image",class:"slider-image"},null,8,Ne)])]),_:2},1024))),128))]),_:1})])])):C("",!0),P.value&&y.value.id===i.id?(n(),a("div",{key:1,class:"popupReviews",onClick:s[5]||(s[5]=K(o=>V(),["self"]))},[e("div",Ae,[e("div",{onClick:V,class:"close-label"},Le),e("div",je,[(n(),a(p,null,w(5,o=>e("span",{key:o,class:N(["star",{filled:o<=E.value}])},"★",2)),64))]),e("img",{src:R(i),alt:"Product Image",class:"product-image"},null,8,ze),e("div",Oe,[e("div",Xe,[(n(),a(p,null,w(5,o=>e("span",{key:o,class:N(["star star-rating",{filled:o<=_.value}]),onClick:U=>W(o)}," ★ ",10,Ge)),64))])]),e("div",Je,[B(e("textarea",{"onUpdate:modelValue":s[3]||(s[3]=o=>v.value=o),placeholder:"Komment schreiben ..."},null,512),[[I,v.value]]),e("label",{onClick:s[4]||(s[4]=o=>J(y.value))},We)]),e("div",Ye,[(n(!0),a(p,null,w(m.value,o=>(n(),a("div",{key:o.id,class:"comment"},[e("div",et,[e("p",null,[e("strong",null,c(o.user.firstname)+":",1),ae(" "+c(o.comment),1)]),e("p",tt,"Bewertung: "+c(o.rating),1)]),o.user_id&&A(k).authUser?(n(),a("div",{key:0,class:"bin",onClick:U=>Q(o)},[o.user_id==A(k).authUser.id?(n(),a("svg",ot,nt)):C("",!0)],8,st)):C("",!0)]))),128))])])])):C("",!0)]))),128))])])])]),e("div",at,[f(de)])],64)}}},ht=te(rt,[["__scopeId","data-v-8726c10d"]]);export{ht as default};
