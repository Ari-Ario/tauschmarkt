import{_ as te,u as se,r as l,C as oe,a as y,o as n,c as a,b as q,d as e,f as B,v as I,F as p,m as f,h as ie,l as w,t as c,w as N,e as M,n as ne,q as C,D as U,P as ae,k as A,p as le,g as re,S as u}from"./app-LPhj_kXP.js";import{H as ce}from"./Header-kkjSjTgb.js";import{u as de}from"./CartList.vue_vue_type_style_index_0_scoped_444ccb5a_lang-BhsvUD8N.js";const d=x=>(le("data-v-a004e8de"),x=x(),re(),x),ue={class:"bg-white container"},me={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},pe={"aria-labelledby":"products-heading",class:"pb-24 pt-6"},he={class:"prise-form"},ve={class:"hidden lg:block"},_e={class:"flex items-center justify-between space-x-3"},ge=d(()=>e("h3",{class:"sr-only"},"Preis:",-1)),fe={class:"basis-1/3"},we=d(()=>e("label",{for:"filters-price-from",class:"mb-2 block text-sm font-medium text-gray-900 dark:text-white"},"Von",-1)),xe={class:"basis-1/3"},be=d(()=>e("label",{for:"filters-price-to",class:"mb-2 block text-sm font-medium text-gray-900 dark:text-white"},"Bis",-1)),ke={class:"lg:col-span-3"},ye={class:"product-list"},qe={class:"product-info"},Ce={key:0},Te={key:1},Pe=["src"],Ze={class:"product-actions"},Be=["onClick"],Ie=d(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#298E46"},[e("path",{d:"M480-320q75 0 127.5-52.5T660-500q0-75-52.5-127.5T480-680q-75 0-127.5 52.5T300-500q0 75 52.5 127.5T480-320Zm0-72q-45 0-76.5-31.5T372-500q0-45 31.5-76.5T480-608q45 0 76.5 31.5T588-500q0 45-31.5 76.5T480-392Zm0 192q-146 0-266-81.5T40-500q54-137 174-218.5T480-800q146 0 266 81.5T920-500q-54 137-174 218.5T480-200Zm0-300Zm0 220q113 0 207.5-59.5T832-500q-50-101-144.5-160.5T480-720q-113 0-207.5 59.5T128-500q50 101 144.5 160.5T480-280Z"})],-1)),Me=[Ie],Se=["onClick"],$e=d(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#298E46"},[e("path",{d:"m363-390 117-71 117 71-31-133 104-90-137-11-53-126-53 126-137 11 104 90-31 133ZM80-80v-720q0-33 23.5-56.5T160-880h640q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240H240L80-80Zm126-240h594v-480H160v525l46-45Zm-46 0v-480 480Z"})],-1)),He=[$e],Re=["onClick"],Fe=d(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#298E46"},[e("path",{d:"M240-80q-33 0-56.5-23.5T160-160v-480q0-33 23.5-56.5T240-720h80q0-66 47-113t113-47q66 0 113 47t47 113h80q33 0 56.5 23.5T800-640v480q0 33-23.5 56.5T720-80H240Zm0-80h480v-480h-80v80q0 17-11.5 28.5T600-520q-17 0-28.5-11.5T560-560v-80H400v80q0 17-11.5 28.5T360-520q-17 0-28.5-11.5T320-560v-80h-80v480Zm160-560h160q0-33-23.5-56.5T480-800q-33 0-56.5 23.5T400-720ZM240-160v-480 480Z"})],-1)),Ee=[Fe],Ve={class:"broadcast"},Ke={class:"carousel__item"},Ne=["src"],Ue={class:"review-section"},Ae=d(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#298E46"},[e("path",{d:"m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"})],-1)),De=[Ae],Le={class:"stars"},je=["src"],ze={class:"review-header"},Oe={class:"stars"},Xe=["onClick"],Ge={class:"comment-box"},Je=d(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"40px",viewBox:"0 -960 960 960",width:"40px",fill:"#298E46"},[e("path",{d:"M120-160v-640l760 320-760 320Zm66.67-102 520.66-218-520.66-220v158.67L428-480l-241.33 60v158Zm0 0v-438 438Z"})],-1)),Qe=[Je],We={class:"comments-list"},Ye={class:"comment-part"},et={style:{"text-align":"left"}},tt=["onClick"],st={key:0,xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#EA3323"},ot=d(()=>e("path",{d:"M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"},null,-1)),it=[ot],nt={__name:"Index",props:{products:Array},setup(x){const b=se(),D=ie().currentRoute.value.params.id,S=l([]),$=l([]),h=l({prices:[0,1e4]});l(!1);const T=l(!1),H=l([]),L=async()=>{try{const t=await w.get(`/api/product/${D}`);S.value=t.data.products.data,R()}catch(t){console.error("Failed to fetch Product:",t)}},R=()=>{const[t,s]=h.value.prices;$.value=S.value.filter(r=>r.price>=t&&r.price<=s)},j=t=>{H.value=t.product_images,T.value=!0},z=()=>{T.value=!1};function F(t){return t.product_images&&t.product_images.length>0?`/${t.product_images[0].image}`:"../assets/Placeholder-enterprise.png"}oe(()=>{L()});const{addToCart:O}=de(),X=t=>{const s=document.querySelector('meta[name="csrf-token"]').getAttribute("content");w.post(`/api/cart/store/${t.id}`,t,{quantity:t.quantity,price:t.price,seller_id:t.seller_id},{headers:{"Content-Type":"multipart/form-data","X-CSRF-TOKEN":s}}).then(r=>{const g=r.data.flash;g&&g.success&&u.fire({toast:!0,icon:"success",position:"top-end",showConfirmButton:!1,title:g.success,timer:3e3}),O(t)}).catch(r=>{console.error("Error adding to cart:",r)})},m=l([]),E=l(0),P=l(!1),k=l({}),v=l(""),_=l(0),Z=async t=>{k.value=t;try{const s=await w.get(`/api/product-review/${t.id}`);m.value=s.data,console.log(m.value),G(),P.value=!0}catch(s){console.error("Failed to fetch reviews:",s)}},V=()=>{P.value=!1},G=()=>{const t=m.value.reduce((s,r)=>s+r.rating,0);E.value=m.value.length?(t/m.value.length).toFixed(1):0},J=async t=>{if(!b.authUser){u.fire({toast:!0,icon:"info",position:"top-end",showConfirmButton:!1,title:"Melden Sie sich an!",timer:3e3});return}if(!v.value.trim()||!_.value){u.fire({toast:!0,icon:"warning",position:"top-end",showConfirmButton:!1,title:"entweder Sterne oder Komment is leer!",timer:3e3});return}document.querySelector('meta[name="csrf-token"]').getAttribute("content");try{await w.post("/api/product-review",{user_id:b.authUser.id,product_id:t.id,comment:v.value,rating:_.value}),v.value="",_.value=0,await Z(t),u.fire({toast:!0,icon:"success",position:"top-end",showConfirmButton:!1,title:"Ihre Kommnt wurde gepostet!",timer:3e3})}catch(s){console.error("Failed to submit comment:",s),u.fire({toast:!0,icon:"error",position:"top-end",showConfirmButton:!1,title:"Komment wurde nicht gepostet!"})}},Q=async t=>{try{await w.delete(`/api/product-review/${t.id}`),u.fire({toast:!0,icon:"success",position:"top-end",showConfirmButton:!1,title:"Ihre Komment wurde gelöscht!",timer:3e3}),await Z(k)}catch(s){console.error("Failed to delete comment:",s),u.fire({toast:!0,icon:"error",position:"top-end",showConfirmButton:!1,title:"Komment wurde nicht gelöscht!"})}},W=t=>{_.value=t};return(t,s)=>{const r=y("Slide"),g=y("Navigation"),Y=y("Pagination"),ee=y("Carousel");return n(),a(p,null,[q(ce),e("div",ue,[e("main",me,[e("section",pe,[e("div",he,[e("form",ve,[e("div",_e,[ge,e("div",fe,[we,B(e("input",{type:"number",id:"filters-price-from",placeholder:"Min price","onUpdate:modelValue":s[0]||(s[0]=i=>h.value.prices[0]=i),class:"block w-full rounded-lg border border-gray-300"},null,512),[[I,h.value.prices[0]]])]),e("div",xe,[be,B(e("input",{type:"number",id:"filters-price-to",placeholder:"Max price","onUpdate:modelValue":s[1]||(s[1]=i=>h.value.prices[1]=i),class:"block w-full rounded-lg border border-gray-300"},null,512),[[I,h.value.prices[1]]])]),e("div",{class:"basis-1/3"},[e("button",{type:"button",onClick:R,class:"bt-1 mt-6 w-full rounded-lg bg-blue-500 px-4 py-2 text-white hover:bg-blue-700"},"Verwenden")])])])])]),e("div",ke,[e("div",ye,[(n(!0),a(p,null,f($.value,i=>(n(),a("div",{key:i.id,class:"product-card"},[e("div",qe,[e("p",null,c(i.name),1),e("p",null,c(i.quantity)+" übrig",1),i.amount?(n(),a("p",Ce,c(i.price)+"CHF /"+c(i.amount)+c(i.mass_unit),1)):(n(),a("p",Te,c(i.price)+"CHF /"+c(i.mass_unit),1))]),e("img",{src:F(i),alt:"Product Image",class:"product-image"},null,8,Pe),e("div",Ze,[e("button",{class:"product-buttons",onClick:o=>j(i)},Me,8,Be),e("button",{class:"product-buttons",onClick:o=>Z(i)},He,8,Se),e("button",{onClick:o=>X(i)},Ee,8,Re)]),T.value?(n(),a("div",{key:0,class:"popupImages",onClick:s[2]||(s[2]=N(o=>z(),["self"]))},[e("div",Ve,[q(ee,null,{addons:M(()=>[q(g),q(Y)]),default:M(()=>[(n(!0),a(p,null,f(H.value,(o,K)=>(n(),ne(r,{key:o.id},{default:M(()=>[e("div",Ke,[e("img",{src:`/${o.image}`,alt:"Product Image",class:"slider-image"},null,8,Ne)])]),_:2},1024))),128))]),_:1})])])):C("",!0),P.value&&k.value.id===i.id?(n(),a("div",{key:1,class:"popupReviews",onClick:s[5]||(s[5]=N(o=>V(),["self"]))},[e("div",Ue,[e("div",{onClick:V,class:"close-label"},De),e("div",Le,[(n(),a(p,null,f(5,o=>e("span",{key:o,class:U(["star",{filled:o<=E.value}])},"★",2)),64))]),e("img",{src:F(i),alt:"Product Image",class:"product-image"},null,8,je),e("div",ze,[e("div",Oe,[(n(),a(p,null,f(5,o=>e("span",{key:o,class:U(["star star-rating",{filled:o<=_.value}]),onClick:K=>W(o)}," ★ ",10,Xe)),64))])]),e("div",Ge,[B(e("textarea",{"onUpdate:modelValue":s[3]||(s[3]=o=>v.value=o),placeholder:"Komment schreiben ..."},null,512),[[I,v.value]]),e("label",{onClick:s[4]||(s[4]=o=>J(k.value))},Qe)]),e("div",We,[(n(!0),a(p,null,f(m.value,o=>(n(),a("div",{key:o.id,class:"comment"},[e("div",Ye,[e("p",null,[e("strong",null,c(o.user.firstname)+":",1),ae(" "+c(o.comment),1)]),e("p",et,"Bewertung: "+c(o.rating),1)]),o.user_id&&A(b).authUser?(n(),a("div",{key:0,class:"bin",onClick:K=>Q(o)},[o.user_id==A(b).authUser.id?(n(),a("svg",st,it)):C("",!0)],8,tt)):C("",!0)]))),128))])])])):C("",!0)]))),128))])])])])],64)}}},dt=te(nt,[["__scopeId","data-v-a004e8de"]]);export{dt as default};
