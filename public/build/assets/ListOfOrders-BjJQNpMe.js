import{_ as D,u as P,r as w,m as U,o as i,c as a,d as e,b as g,F as y,s as $,j as _,t as o,g as c,n as m,q as p,S as b,p as I,h as O}from"./app-D8tagWsk.js";import{F as V}from"./FooterUser-Di210AOo.js";import{F as z}from"./FooterSeller-CMlmVdmk.js";/* empty css                                                                       */import"./locals-BxkJDxKa.js";import{H as E}from"./Header-BmOdKlL7.js";/* empty css                                                                   */const l=u=>(I("data-v-570c464c"),u=u(),O(),u),N={class:"orders-page"},L=l(()=>e("div",{class:"order-details"},[e("h3",null,"Bestellungen")],-1)),q={class:"orders-list"},H=["onClick"],Z=["src"],K={key:1,class:"order-details-popup"},j={class:"details-header"},G=l(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#298E46"},[e("path",{d:"m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"})],-1)),M=[G],R={class:"details-header"},T=["src"],J=l(()=>e("strong",null,"PDF",-1)),Q=l(()=>e("svg",{class:"pdfSVG",xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#298E46"},[e("path",{d:"m242-200 200-280-200-280h98l200 280-200 280h-98Zm238 0 200-280-200-280h98l200 280-200 280h-98Z"})],-1)),W=l(()=>e("strong",null,"Address:",-1)),X=l(()=>e("strong",null,"Abholungszeit:",-1)),Y=l(()=>e("strong",null,"Bestellungsdatum:",-1)),ee=l(()=>e("strong",null,"Bestellungsnummer:",-1)),se=l(()=>e("strong",null,"Preis:",-1)),te={key:0},oe=l(()=>e("strong",null,"Abgeholt:",-1)),le={key:1,class:"collect-section"},re=l(()=>e("h3",null,"Bestellung zum Abholen",-1)),ne={class:"collect-info"},ie=l(()=>e("div",{class:"quantity"},[e("div",{class:"circle"},"1x"),e("p",null,"Surprise Bag")],-1)),ae={class:"order-code"},ce=l(()=>e("p",null,"Drücken Sie den Button zum Abholen. Verkäfer und Käufer, beide beachten.",-1)),de=l(()=>e("span",{class:"swipe-icon"},"➔",-1)),ue={key:2,class:"collect-section"},_e=l(()=>e("h3",null,"Bestellung zum Abholen",-1)),pe={class:"collect-info"},he=l(()=>e("div",{class:"quantity"},[e("div",{class:"circle"},"1x"),e("p",null,"Surprise Bag")],-1)),ve={class:"order-code"},ge=l(()=>e("p",null,"Drücken Sie den Button zum Abholen. Verkäfer und Käufer beachten.",-1)),me=l(()=>e("span",{class:"swipe-icon"},"➔",-1)),fe={key:0},ke={key:1},we={__name:"ListOfOrders",setup(u){const d=P(),f=d.authUser.id,h=w([]),B=async()=>{try{const t=await p.get(`/api/sellerorder/${f}`);h.value=t.data}catch(t){console.error("Failed to fetch orders:",t)}},C=async()=>{try{const t=await p.get(`/api/userorder/${f}`);h.value=t.data}catch(t){console.error("Failed to fetch orders:",t)}};U(()=>{d.authUser.is_seller?B():C()});const s=w(null),x=t=>{s.value=t},v=()=>{s.value=null},k=async t=>{try{t.picked=!0,await p.put("/api/orders/markAsCollected",{orderId:t.id}),v(),b.fire({toast:!0,icon:"success",position:"top-end",showConfirmButton:!1,title:"Abholen erfolgreich!",timer:3e3})}catch(r){console.error("Error marking order as collected:",r),b.fire({toast:!0,icon:"error",position:"top-end",showConfirmButton:!1,title:"Nicht Aktualisiert! Versuchen Sie wieder"}),t.picked=!1}},A=async t=>{try{const r=await p.post(`/api/orders/pdf/${t}`);r.data.pdfUrl?window.location.href=r.data.pdfUrl:console.error("PDF URL not found in response:",r)}catch(r){console.error("Error generating PDF:",r)}},S=t=>t?`storage/${t}`:"storage/enterprise_images/default.png",F=t=>t?`storage/${t}`:"storage/profile_images/default.png";return(t,r)=>(i(),a(y,null,[e("header",null,[g(E)]),e("div",N,[L,e("div",q,[(i(!0),a(y,null,$(h.value,n=>(i(),a("div",{key:n.id,class:"order-item",onClick:ye=>x(n)},[e("img",{src:F(n.profile_image),alt:"Profil Image"},null,8,Z),e("div",null,[e("h3",null,o(n.firstname)+" "+o(n.lastname),1),e("p",null,o(n.street)+" "+o(n.house_number)+", "+o(n.zip_code)+" "+o(n.city),1)])],8,H))),128))]),s.value?(i(),a("div",{key:0,class:"backdrop",onClick:v})):_("",!0),s.value?(i(),a("div",K,[e("div",j,[e("h2",null,o(s.value.firstname)+" "+o(s.value.lastname),1),e("div",{onClick:v,class:"closingCross"},M)]),e("div",R,[e("img",{src:S(s.value.enterprise_image),alt:"Image"},null,8,T),e("p",{onClick:r[0]||(r[0]=n=>A(s.value.id)),class:"pdf"},[J,c(),Q])]),e("p",null,[W,c(" "+o(s.value.street)+" "+o(s.value.house_number)+", "+o(s.value.zip_code)+" "+o(s.value.city),1)]),e("p",null,[X,c(" von "+o(s.value.opening)+" bis "+o(s.value.closing),1)]),e("p",null,[Y,c(" "+o(s.value.orderDate),1)]),e("p",null,[ee,c(" "+o(s.value.id),1)]),e("p",null,[se,c(" "+o(s.value.price)+" CHF",1)]),s.value.picked?(i(),a("div",te,[e("p",null,[oe,c(" "+o(s.value.picked),1)])])):_("",!0),!s.value.picked&&s.value.user_id===1&&m(d).authUser.is_seller?(i(),a("div",le,[re,e("div",ne,[ie,e("p",null,o(s.value.firstname),1),e("div",ae,o(s.value.orderCode),1)]),ce,e("button",{class:"swipe-to-collect",onClick:r[1]||(r[1]=n=>k(s.value))},[de,c(" Abholen ")])])):!s.value.picked&&!m(d).authUser.is_seller?(i(),a("div",ue,[_e,e("div",pe,[he,e("p",null,o(s.value.firstname),1),e("div",ve,o(s.value.orderCode),1)]),ge,e("button",{class:"swipe-to-collect",onClick:r[2]||(r[2]=n=>k(s.value))},[me,c(" Abholen ")])])):_("",!0)])):_("",!0)]),m(d).authUser.is_seller?(i(),a("footer",fe,[g(z)])):(i(),a("footer",ke,[g(V)]))],64))}},De=D(we,[["__scopeId","data-v-570c464c"]]);export{De as default};
