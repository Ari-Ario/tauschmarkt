import{_ as Z,y as E,u as H,r as u,m as K,q as C,o as l,c as d,d as e,F as L,s as W,G as _,t as S,w as A,f as i,v as p,x as D,n as j,j as g,B as Q,H as z,b as N,i as $,D as R,S as P,p as O,h as J}from"./app-D8tagWsk.js";import{F as X}from"./FooterSeller-CMlmVdmk.js";import{W as Y}from"./WebCamUI-DjqkXnI8.js";const a=c=>(O("data-v-0b5f1a9b"),c=c(),J(),c),ee={class:"form-container"},te={class:"categories-selector"},oe=a(()=>e("h3",null,"Welche Kategorien bieten Sie an?",-1)),ne=["onClick"],se={key:0,class:"form-popup"},ae={class:"form-group"},ie={class:"form-group"},le=a(()=>e("label",{for:"name"},"Produktname",-1)),re={class:"form-group"},ue=a(()=>e("label",{for:"description"},"Beschreibung",-1)),de=a(()=>e("label",{for:"photo"},"Foto von Ware",-1)),pe={class:"form-group",style:{display:"flex"}},ce=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#298E46"},[e("path",{d:"M160-80v-80h640v80H160Zm200-160v-280H200l280-360 280 360H600v280H360Zm80-80h80v-280h76L480-750 364-600h76v280Zm40-280Z"})],-1)),me=[ce],ve=a(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#298E46"},[e("path",{d:"M440-440ZM120-120q-33 0-56.5-23.5T40-200v-480q0-33 23.5-56.5T120-760h126l74-80h240v80H355l-73 80H120v480h640v-360h80v360q0 33-23.5 56.5T760-120H120Zm640-560v-80h-80v-80h80v-80h80v80h80v80h-80v80h-80ZM440-260q75 0 127.5-52.5T620-440q0-75-52.5-127.5T440-620q-75 0-127.5 52.5T260-440q0 75 52.5 127.5T440-260Zm0-80q-42 0-71-29t-29-71q0-42 29-71t71-29q42 0 71 29t29 71q0 42-29 71t-71 29Z"})],-1)),he=[ve],fe={class:"form-group"},_e=a(()=>e("label",{for:"price-unit"},"Prise Einheit",-1)),ge=a(()=>e("option",{value:"perKilogram"},"Pro Kilogram",-1)),ye=a(()=>e("option",{value:"perGram"},"Pro Gram",-1)),be=a(()=>e("option",{value:"perUnit"},"Pro Stuck",-1)),qe=a(()=>e("option",{value:"perLiter"},"Pro Liter",-1)),ke=[ge,ye,be,qe],we={key:1,class:"form-group"},Ce=a(()=>e("label",{for:"price-per-gram"},"Wieviele Grams",-1)),Se={key:2,class:"form-group"},Pe=a(()=>e("label",{for:"unit-price"},"Quantität (in Kilograms)",-1)),Ue=["value"],Ie={key:3,class:"form-group"},xe=a(()=>e("label",{for:"unit-price"},"Quantität (in Stuck)",-1)),Fe=["value"],Ge={key:4,class:"form-group"},Ve=a(()=>e("label",{for:"unit-price"},"Quantität (in Liter)",-1)),Te=["value"],Be={key:5,class:"form-group"},Me=a(()=>e("label",{for:"unit-price"},"Quantität (zahl der Einheiten)",-1)),Ze=["value"],Ee={class:"form-group"},He=a(()=>e("label",{for:"unit-price"},"Preis (Franken)",-1)),Ke=a(()=>e("button",{type:"submit"},"Speichern",-1)),Le={__name:"AddProduct",setup(c){$();const y=E(H()),U=y.user.id,b=u([]),m=u(new Set),I=async()=>{try{const t=await C.get("api/categories");b.value=t.data}catch(t){console.error("Error loading enterprises:",t)}};K(()=>{C.defaults.withCredentials=!0,I()});const f=u(!1);u(""),u("");const o=u({CategoryId:null,sellerId:U,name:"",description:"",Grams:null,quantity:null,unitPrice:null,photo:null,published:!1,inStock:!1,quantity:null,mass_unit:""}),r=u("perGram"),q=u(""),v=t=>(o.value.mass_unit=t,t);function x(t,s){f.value=!0,q.value=t,o.value.CategoryId=s}function k(){f.value=!1,F()}const F=()=>{o.value={name:"",description:"",Grams:null,pricePerKilogram:null,unitPrice:null,photo:null},r.value="perGram"},w=t=>{o.value.photo=t.target.files[0]},G=t=>{r.value=t.target.value},V=async()=>{try{const t=new FormData;t.append("category_id",o.value.CategoryId),t.append("seller_id",y.authUser.value.id),t.append("name",o.value.name),t.append("description",o.value.description),t.append("published",!0),t.append("inStock",!0),t.append("quantity",o.value.quantity),t.append("mass_unit",o.value.mass_unit),r.value==="perGram"?t.append("amount",o.value.Grams):t.append("amount",0),t.append("price",o.value.unitPrice),o.value.photo&&t.append("product_picture",o.value.photo);const s=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),n=await R.post("/product/add",t);m.value.add(o.value.name),k(),P.fire({toast:!0,icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,title:"Produkt wurde hizugefügt!"})}catch(t){console.error("Error adding product:",t),P.fire({toast:!0,icon:"error",position:"top-end",showConfirmButton:!1,title:"Ups. Fehler, versuchen Sie wieder!"})}},h=u(!1),T=()=>{h.value=!h.value},B=t=>{console.log("image blob: ",t.blob),console.log("image data url",t.image_data_url);const n={target:{files:[new File([t.blob],"photo.jpg",{type:"image/jpeg"})]}};w(n),h.value=!1},M=()=>{this.$refs.backgroundImageInput.click()};return(t,s)=>(l(),d("div",ee,[e("div",te,[oe,(l(!0),d(L,null,W(b.value,n=>(l(),d("div",{key:n.id,class:_(["category-button",{selected:m.value.has(n)}]),onClick:We=>x(n.name,n.id)},S(n.name),11,ne))),128)),f.value?(l(),d("div",se,[e("form",{onSubmit:s[10]||(s[10]=A(n=>V(),["prevent"]))},[i(e("input",{type:"hidden",name:"",class:_({selected:m.value.has(t.category)}),"onUpdate:modelValue":s[0]||(s[0]=n=>o.value.CategoryId=n)},null,2),[[p,o.value.CategoryId]]),e("div",ae,[e("div",{class:_(["category-button",{selected:m.value.has(t.category)}]),style:{width:"90%"}},S(q.value),3)]),e("div",ie,[le,i(e("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=n=>o.value.name=n),class:"form-input",required:""},null,512),[[p,o.value.name]])]),e("div",re,[ue,i(e("textarea",{"onUpdate:modelValue":s[2]||(s[2]=n=>o.value.description=n),class:"form-input",required:""},null,512),[[p,o.value.description]])]),de,e("div",pe,[e("input",{type:"file",onChange:w,ref:"backgroundImageInput",class:"form-input",accept:"image/*",capture:"environment",style:{position:"absolute"}},null,544),e("div",{class:"form-input file-input-container",onClick:M},me),e("div",{class:"camera-icon bg-camera cam",onClick:T,style:{cursor:"pointer"}},he)]),h.value?(l(),D(j(Y),{key:0,fullscreenState:!1,onPhotoTaken:B,ref:"webCam"},null,512)):g("",!0),e("div",fe,[_e,i(e("select",{"onUpdate:modelValue":s[3]||(s[3]=n=>r.value=n),class:"form-select",onChange:G},ke,544),[[Q,r.value]])]),r.value==="perGram"?(l(),d("div",we,[Ce,i(e("input",{type:"number","onUpdate:modelValue":s[4]||(s[4]=n=>o.value.Grams=n),class:"form-input",required:""},null,512),[[p,o.value.Grams,void 0,{number:!0}]])])):g("",!0),r.value==="perKilogram"?(l(),d("div",Se,[Pe,i(e("input",{type:"number",name:"qty",id:"floating_qty","onUpdate:modelValue":s[5]||(s[5]=n=>o.value.quantity=n),class:"form-input",required:""},null,512),[[p,o.value.quantity,void 0,{number:!0}]]),e("input",{type:"hidden",value:v("KG")},null,8,Ue)])):r.value==="perUnit"?(l(),d("div",Ie,[xe,i(e("input",{type:"number",name:"qty",id:"floating_qty","onUpdate:modelValue":s[6]||(s[6]=n=>o.value.quantity=n),class:"form-input",required:""},null,512),[[p,o.value.quantity,void 0,{number:!0}]]),e("input",{type:"hidden",value:v("Stuck")},null,8,Fe)])):r.value==="perLiter"?(l(),d("div",Ge,[Ve,i(e("input",{type:"number",name:"qty",id:"floating_qty","onUpdate:modelValue":s[7]||(s[7]=n=>o.value.quantity=n),class:"form-input",required:""},null,512),[[p,o.value.quantity,void 0,{number:!0}]]),e("input",{type:"hidden",value:v("Liter")},null,8,Te)])):(l(),d("div",Be,[Me,i(e("input",{type:"number",name:"qty",id:"floating_qty","onUpdate:modelValue":s[8]||(s[8]=n=>o.value.quantity=n),class:"form-input",required:""},null,512),[[p,o.value.quantity,void 0,{number:!0}]]),e("input",{type:"hidden",value:v("Grams")},null,8,Ze)])),e("div",Ee,[He,i(e("input",{type:"number","onUpdate:modelValue":s[9]||(s[9]=n=>o.value.unitPrice=n),class:"form-input",step:"0.01",required:""},null,512),[[p,o.value.unitPrice]])]),e("div",{class:"form-group",style:{display:"flex","justify-content":"space-between"}},[Ke,e("button",{type:"button",onClick:k,style:{"background-color":"#e0e0e0",color:"#555"}},"Abbrechen")])],32)])):g("",!0)]),i(e("div",null,[N(X)],512),[[z,t.currentPage!=="Map"]])]))}},Qe=Z(Le,[["__scopeId","data-v-0b5f1a9b"]]);export{Qe as default};
