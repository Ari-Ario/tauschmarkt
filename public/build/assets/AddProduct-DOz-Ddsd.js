import{_ as E,s as Z,u as H,r,j as K,l as C,o as i,c as d,d as e,F as W,m as A,D as _,t as S,w as D,f as l,v as p,n as j,k as z,q as y,y as N,E as Q,b as $,h as L,B as R,S as P,p as O,g as J}from"./app-DWDepuyr.js";import{F as X}from"./FooterSeller-3R35YP27.js";import{W as Y}from"./WebCamUI-DYFa4s9z.js";const n=c=>(O("data-v-a403a853"),c=c(),J(),c),ee={class:"form-container"},te={class:"categories-selector"},oe=n(()=>e("h3",null,"Welche Kategorien bieten Sie an?",-1)),se=["onClick"],ae={key:0,class:"form-popup"},ne={class:"form-group"},le={class:"form-group"},re=n(()=>e("label",{for:"name"},"Produktname",-1)),ie={class:"form-group"},ue=n(()=>e("label",{for:"description"},"Beschreibung",-1)),de=n(()=>e("label",{for:"photo"},"Foto von Ware",-1)),pe={class:"form-group",style:{display:"flex"}},ce=n(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#298E46"},[e("path",{d:"M160-80v-80h640v80H160Zm200-160v-280H200l280-360 280 360H600v280H360Zm80-80h80v-280h76L480-750 364-600h76v280Zm40-280Z"})],-1)),me=[ce],ve=n(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#298E46"},[e("path",{d:"M440-440ZM120-120q-33 0-56.5-23.5T40-200v-480q0-33 23.5-56.5T120-760h126l74-80h240v80H355l-73 80H120v480h640v-360h80v360q0 33-23.5 56.5T760-120H120Zm640-560v-80h-80v-80h80v-80h80v80h80v80h-80v80h-80ZM440-260q75 0 127.5-52.5T620-440q0-75-52.5-127.5T440-620q-75 0-127.5 52.5T260-440q0 75 52.5 127.5T440-260Zm0-80q-42 0-71-29t-29-71q0-42 29-71t71-29q42 0 71 29t29 71q0 42-29 71t-71 29Z"})],-1)),he=[ve],fe={class:"form-group"},ge=n(()=>e("label",{for:"price-unit"},"Prise Einheit",-1)),_e=n(()=>e("option",{value:"perKilogram"},"Pro Kilogram",-1)),ye=n(()=>e("option",{value:"perGram"},"Pro Gram",-1)),be=n(()=>e("option",{value:"perUnit"},"Pro Stuck",-1)),qe=[_e,ye,be],ke={key:1,class:"form-group"},we=n(()=>e("label",{for:"price-per-gram"},"Wieviele Grams",-1)),Ce={key:2,class:"form-group"},Se=n(()=>e("label",{for:"unit-price"},"Quantit채t (in Kilograms)",-1)),Pe=["value"],Ue={key:3,class:"form-group"},Ie=n(()=>e("label",{for:"unit-price"},"Quantit채t (in Stuck)",-1)),Fe=["value"],xe={key:4,class:"form-group"},Ge=n(()=>e("label",{for:"unit-price"},"Quantit채t (zahl der Einheiten)",-1)),Ve=["value"],Te={class:"form-group"},Be=n(()=>e("label",{for:"unit-price"},"Preis (Franken)",-1)),Me=n(()=>e("button",{type:"submit"},"Speichern",-1)),Ee={__name:"AddProduct",setup(c){L();const b=Z(H()),U=b.user.id,h=r([]),m=r(new Set),I=async()=>{try{const t=await C.get("api/categories");h.value=t.data,console.log(h)}catch(t){console.error("Error loading enterprises:",t)}};K(()=>{C.defaults.withCredentials=!0,I()});const f=r(!1);r(""),r("");const o=r({CategoryId:null,sellerId:U,name:"",description:"",Grams:null,quantity:null,unitPrice:null,photo:null,published:!1,inStock:!1,quantity:null,mass_unit:""}),u=r("perGram"),q=r(""),g=t=>(o.value.mass_unit=t,t);function F(t,a){f.value=!0,q.value=t,o.value.CategoryId=a}function k(){f.value=!1,x()}const x=()=>{o.value={name:"",description:"",Grams:null,pricePerKilogram:null,unitPrice:null,photo:null},u.value="perGram"},w=t=>{o.value.photo=t.target.files[0]},G=t=>{u.value=t.target.value},V=async()=>{try{const t=new FormData;t.append("category_id",o.value.CategoryId),t.append("seller_id",b.authUser.value.id),t.append("name",o.value.name),t.append("description",o.value.description),t.append("published",!0),t.append("inStock",!0),t.append("quantity",o.value.quantity),t.append("mass_unit",o.value.mass_unit),u.value==="perGram"?t.append("amount",o.value.Grams):t.append("amount",0),t.append("price",o.value.unitPrice),o.value.photo&&t.append("product_picture",o.value.photo);const a=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),s=await R.post("/product/add",t);m.value.add(o.value.name),k(),P.fire({toast:!0,icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,title:"Produkt wurde hizugef체gt!"})}catch(t){console.error("Error adding product:",t),P.fire({toast:!0,icon:"error",position:"top-end",showConfirmButton:!1,title:"Ups. Fehler, versuchen Sie wieder!"})}},v=r(!1),T=()=>{v.value=!v.value},B=t=>{console.log("image blob: ",t.blob),console.log("image data url",t.image_data_url);const s={target:{files:[new File([t.blob],"photo.jpg",{type:"image/jpeg"})]}};w(s),v.value=!1},M=()=>{this.$refs.backgroundImageInput.click()};return(t,a)=>(i(),d("div",ee,[e("div",te,[oe,(i(!0),d(W,null,A(h.value,s=>(i(),d("div",{key:s.id,class:_(["category-button",{selected:m.value.has(s)}]),onClick:Ze=>F(s.name,s.id)},S(s.name),11,se))),128)),f.value?(i(),d("div",ae,[e("form",{onSubmit:a[9]||(a[9]=D(s=>V(),["prevent"]))},[l(e("input",{type:"hidden",name:"",class:_({selected:m.value.has(t.category)}),"onUpdate:modelValue":a[0]||(a[0]=s=>o.value.CategoryId=s)},null,2),[[p,o.value.CategoryId]]),e("div",ne,[e("div",{class:_(["category-button",{selected:m.value.has(t.category)}]),style:{width:"90%"}},S(q.value),3)]),e("div",le,[re,l(e("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=s=>o.value.name=s),class:"form-input",required:""},null,512),[[p,o.value.name]])]),e("div",ie,[ue,l(e("textarea",{"onUpdate:modelValue":a[2]||(a[2]=s=>o.value.description=s),class:"form-input",required:""},null,512),[[p,o.value.description]])]),de,e("div",pe,[e("input",{type:"file",onChange:w,ref:"backgroundImageInput",class:"form-input",accept:"image/*",capture:"environment",style:{position:"absolute"}},null,544),e("div",{class:"form-input file-input-container",onClick:M},me),e("div",{class:"camera-icon bg-camera cam",onClick:T,style:{cursor:"pointer"}},he)]),v.value?(i(),j(z(Y),{key:0,fullscreenState:!1,onPhotoTaken:B,ref:"webCam"},null,512)):y("",!0),e("div",fe,[ge,l(e("select",{"onUpdate:modelValue":a[3]||(a[3]=s=>u.value=s),class:"form-select",onChange:G},qe,544),[[N,u.value]])]),u.value==="perGram"?(i(),d("div",ke,[we,l(e("input",{type:"number","onUpdate:modelValue":a[4]||(a[4]=s=>o.value.Grams=s),class:"form-input",required:""},null,512),[[p,o.value.Grams,void 0,{number:!0}]])])):y("",!0),u.value==="perKilogram"?(i(),d("div",Ce,[Se,l(e("input",{type:"number",name:"qty",id:"floating_qty","onUpdate:modelValue":a[5]||(a[5]=s=>o.value.quantity=s),class:"form-input",required:""},null,512),[[p,o.value.quantity,void 0,{number:!0}]]),e("input",{type:"hidden",value:g("KG")},null,8,Pe)])):u.value==="perUnit"?(i(),d("div",Ue,[Ie,l(e("input",{type:"number",name:"qty",id:"floating_qty","onUpdate:modelValue":a[6]||(a[6]=s=>o.value.quantity=s),class:"form-input",required:""},null,512),[[p,o.value.quantity,void 0,{number:!0}]]),e("input",{type:"hidden",value:g("Stuck")},null,8,Fe)])):(i(),d("div",xe,[Ge,l(e("input",{type:"number",name:"qty",id:"floating_qty","onUpdate:modelValue":a[7]||(a[7]=s=>o.value.quantity=s),class:"form-input",required:""},null,512),[[p,o.value.quantity,void 0,{number:!0}]]),e("input",{type:"hidden",value:g("Grams")},null,8,Ve)])),e("div",Te,[Be,l(e("input",{type:"number","onUpdate:modelValue":a[8]||(a[8]=s=>o.value.unitPrice=s),class:"form-input",step:"0.01",required:""},null,512),[[p,o.value.unitPrice]])]),e("div",{class:"form-group",style:{display:"flex","justify-content":"space-between"}},[Me,e("button",{type:"button",onClick:k,style:{"background-color":"#e0e0e0",color:"#555"}},"Ablehnen")])],32)])):y("",!0)]),l(e("div",null,[$(X)],512),[[Q,t.currentPage!=="Map"]])]))}},Ae=E(Ee,[["__scopeId","data-v-a403a853"]]);export{Ae as default};
