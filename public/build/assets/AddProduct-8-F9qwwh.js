import{_ as M,s as E,u as K,r,j as W,l as C,o as i,c as d,d as e,F as A,m as D,D as g,t as S,w as Z,f as l,v as p,n as j,k as z,q as y,y as H,E as N,b as Q,h as R,B as $,S as P,p as L,g as O}from"./app-DriULaIE.js";import{F as J}from"./FooterSeller-Bpi2OML-.js";import{W as X}from"./WebCamUI-CHl7ukCV.js";const n=c=>(L("data-v-e6c03d2e"),c=c(),O(),c),Y={class:"form-container"},ee={class:"categories-selector"},te=n(()=>e("h3",null,"Welche Kategorien bieten Sie an?",-1)),oe=["onClick"],ae={key:0,class:"form-popup"},se={class:"form-group"},ne={class:"form-group"},le=n(()=>e("label",{for:"name"},"Produktname",-1)),re={class:"form-group"},ie=n(()=>e("label",{for:"description"},"Beschreibung",-1)),ue={class:"form-group",style:{display:"flex"}},de=n(()=>e("label",{for:"photo"},"Foto von Ware",-1)),pe=n(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#298E46"},[e("path",{d:"M440-440ZM120-120q-33 0-56.5-23.5T40-200v-480q0-33 23.5-56.5T120-760h126l74-80h240v80H355l-73 80H120v480h640v-360h80v360q0 33-23.5 56.5T760-120H120Zm640-560v-80h-80v-80h80v-80h80v80h80v80h-80v80h-80ZM440-260q75 0 127.5-52.5T620-440q0-75-52.5-127.5T440-620q-75 0-127.5 52.5T260-440q0 75 52.5 127.5T440-260Zm0-80q-42 0-71-29t-29-71q0-42 29-71t71-29q42 0 71 29t29 71q0 42-29 71t-71 29Z"})],-1)),ce=[pe],me={class:"form-group"},ve=n(()=>e("label",{for:"price-unit"},"Prise Einheit",-1)),fe=n(()=>e("option",{value:"perKilogram"},"Pro Kilogram",-1)),he=n(()=>e("option",{value:"perGram"},"Pro Gram",-1)),_e=n(()=>e("option",{value:"perUnit"},"Pro Stuck",-1)),ge=[fe,he,_e],ye={key:1,class:"form-group"},be=n(()=>e("label",{for:"price-per-gram"},"Wieviele Grams",-1)),qe={key:2,class:"form-group"},ke=n(()=>e("label",{for:"unit-price"},"Quantit채t (in Kilograms)",-1)),we=["value"],Ce={key:3,class:"form-group"},Se=n(()=>e("label",{for:"unit-price"},"Quantit채t (in Stuck)",-1)),Pe=["value"],Ue={key:4,class:"form-group"},Fe=n(()=>e("label",{for:"unit-price"},"Quantit채t (zahl der Einheiten)",-1)),Ge=["value"],Ie={class:"form-group"},Ve=n(()=>e("label",{for:"unit-price"},"Preis (Franken)",-1)),Te=n(()=>e("button",{type:"submit"},"Speichern",-1)),xe={__name:"AddProduct",setup(c){R();const b=E(K()),U=b.user.id,f=r([]),m=r(new Set),F=async()=>{try{const t=await C.get("api/categories");f.value=t.data,console.log(f)}catch(t){console.error("Error loading enterprises:",t)}};W(()=>{C.defaults.withCredentials=!0,F()});const h=r(!1);r(""),r("");const o=r({CategoryId:null,sellerId:U,name:"",description:"",Grams:null,quantity:null,unitPrice:null,photo:null,published:!1,inStock:!1,quantity:null,mass_unit:""}),u=r("perGram"),q=r(""),_=t=>(o.value.mass_unit=t,t);function G(t,s){h.value=!0,q.value=t,o.value.CategoryId=s}function k(){h.value=!1,I()}const I=()=>{o.value={name:"",description:"",Grams:null,pricePerKilogram:null,unitPrice:null,photo:null},u.value="perGram"},w=t=>{o.value.photo=t.target.files[0]},V=t=>{u.value=t.target.value},T=async()=>{try{const t=new FormData;t.append("category_id",o.value.CategoryId),t.append("seller_id",b.authUser.value.id),t.append("name",o.value.name),t.append("description",o.value.description),t.append("published",!0),t.append("inStock",!0),t.append("quantity",o.value.quantity),t.append("mass_unit",o.value.mass_unit),u.value==="perGram"?t.append("amount",o.value.Grams):t.append("amount",0),t.append("price",o.value.unitPrice),o.value.photo&&t.append("product_picture",o.value.photo);const s=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),a=await $.post("/product/add",t);m.value.add(o.value.name),k(),P.fire({toast:!0,icon:"success",position:"top-end",showConfirmButton:!1,timer:3e3,title:"Produkt wurde hizugef체gt!"})}catch(t){console.error("Error adding product:",t),P.fire({toast:!0,icon:"error",position:"top-end",showConfirmButton:!1,title:"Ups. Fehler, versuchen Sie wieder!"})}},v=r(!1),x=()=>{v.value=!v.value},B=t=>{console.log("image blob: ",t.blob),console.log("image data url",t.image_data_url);const a={target:{files:[new File([t.blob],"photo.jpg",{type:"image/jpeg"})]}};w(a),v.value=!1};return(t,s)=>(i(),d("div",Y,[e("div",ee,[te,(i(!0),d(A,null,D(f.value,a=>(i(),d("div",{key:a.id,class:g(["category-button",{selected:m.value.has(a)}]),onClick:Be=>G(a.name,a.id)},S(a.name),11,oe))),128)),h.value?(i(),d("div",ae,[e("form",{onSubmit:s[9]||(s[9]=Z(a=>T(),["prevent"]))},[l(e("input",{type:"hidden",name:"",class:g({selected:m.value.has(t.category)}),"onUpdate:modelValue":s[0]||(s[0]=a=>o.value.CategoryId=a)},null,2),[[p,o.value.CategoryId]]),e("div",se,[e("div",{class:g(["category-button",{selected:m.value.has(t.category)}]),style:{width:"90%"}},S(q.value),3)]),e("div",ne,[le,l(e("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=a=>o.value.name=a),class:"form-input",required:""},null,512),[[p,o.value.name]])]),e("div",re,[ie,l(e("textarea",{"onUpdate:modelValue":s[2]||(s[2]=a=>o.value.description=a),class:"form-input",required:""},null,512),[[p,o.value.description]])]),e("div",ue,[de,e("input",{type:"file",onChange:w,ref:"backgroundImageInput",class:"form-input",accept:"image/*",capture:"environment"},null,544),e("div",{class:"camera-icon bg-camera",onClick:x,style:{cursor:"pointer"}},ce)]),v.value?(i(),j(z(X),{key:0,fullscreenState:!1,onPhotoTaken:B,ref:"webCam"},null,512)):y("",!0),e("div",me,[ve,l(e("select",{"onUpdate:modelValue":s[3]||(s[3]=a=>u.value=a),class:"form-select",onChange:V},ge,544),[[H,u.value]])]),u.value==="perGram"?(i(),d("div",ye,[be,l(e("input",{type:"number","onUpdate:modelValue":s[4]||(s[4]=a=>o.value.Grams=a),class:"form-input",required:""},null,512),[[p,o.value.Grams,void 0,{number:!0}]])])):y("",!0),u.value==="perKilogram"?(i(),d("div",qe,[ke,l(e("input",{type:"number",name:"qty",id:"floating_qty","onUpdate:modelValue":s[5]||(s[5]=a=>o.value.quantity=a),class:"form-input",required:""},null,512),[[p,o.value.quantity,void 0,{number:!0}]]),e("input",{type:"hidden",value:_("KG")},null,8,we)])):u.value==="perUnit"?(i(),d("div",Ce,[Se,l(e("input",{type:"number",name:"qty",id:"floating_qty","onUpdate:modelValue":s[6]||(s[6]=a=>o.value.quantity=a),class:"form-input",required:""},null,512),[[p,o.value.quantity,void 0,{number:!0}]]),e("input",{type:"hidden",value:_("Stuck")},null,8,Pe)])):(i(),d("div",Ue,[Fe,l(e("input",{type:"number",name:"qty",id:"floating_qty","onUpdate:modelValue":s[7]||(s[7]=a=>o.value.quantity=a),class:"form-input",required:""},null,512),[[p,o.value.quantity,void 0,{number:!0}]]),e("input",{type:"hidden",value:_("Grams")},null,8,Ge)])),e("div",Ie,[Ve,l(e("input",{type:"number","onUpdate:modelValue":s[8]||(s[8]=a=>o.value.unitPrice=a),class:"form-input",step:"0.01",required:""},null,512),[[p,o.value.unitPrice]])]),e("div",{class:"form-group",style:{display:"flex","justify-content":"space-between"}},[Te,e("button",{type:"button",onClick:k,style:{"background-color":"#e0e0e0",color:"#555"}},"Ablehnen")])],32)])):y("",!0)]),l(e("div",null,[Q(J)],512),[[N,t.currentPage!=="Map"]])]))}},We=M(xe,[["__scopeId","data-v-e6c03d2e"]]);export{We as default};
