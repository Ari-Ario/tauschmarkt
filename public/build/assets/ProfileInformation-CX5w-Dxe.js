import{_ as j,r as d,u as M,j as O,a as Z,o as a,c as n,d as s,F as H,m as K,q as k,k as C,b,e as $,w as A,t as w,f as E,v as V,l as S,p as D,g as G,G as L}from"./app-BP2bh6ir.js";import{F as Q}from"./FooterUser-7G847avn.js";import{F as R}from"./FooterSeller-CX6X2mg8.js";/* empty css                                                                   */const _=p=>(D("data-v-e597f62d"),p=p(),G(),p),J={class:"container"},W={class:"profile-page"},X=_(()=>s("div",{class:"account-details"},[s("h3",null,"Meine Profil")],-1)),Y=["onClick"],ee={class:"profile-value"},te=_(()=>s("span",null,"Betriebsort fehlt",-1)),se=_(()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#298E46"},[s("path",{d:"M480-480q33 0 56.5-23.5T560-560q0-33-23.5-56.5T480-640q-33 0-56.5 23.5T400-560q0 33 23.5 56.5T480-480Zm0 294q122-112 181-203.5T720-552q0-109-69.5-178.5T480-800q-101 0-170.5 69.5T240-552q0 71 59 162.5T480-186Zm0 106Q319-217 239.5-334.5T160-552q0-150 96.5-239T480-880q127 0 223.5 89T800-552q0 100-79.5 217.5T480-80Zm0-480Z"})],-1)),oe={key:2},ae={key:3},ne={key:4,class:"edit-popup"},le=["for"],ie=["id"],re=["id"],ue=_(()=>s("button",{type:"submit",style:{"margin-bottom":"10px"}},"Speichern",-1)),ce={__name:"ProfileInformation",setup(p){var B;d([]);const h=d(!1),o=d(""),l=d(""),c=d({}),g=d({}),m={firstname:"Vorname",lastname:"Nachname",email:"Email",street:"Strasse",house_number:"Hausnummer",city:"Stadt",zip_code:"Postleitzahl",opening:"öffnungszeit",closing:"Betriebsschluss",payment:"Bankkonto"},i=M();L();const q=(B=i==null?void 0:i.authUser)==null?void 0:B.id,U=async()=>{try{const e=await(await S.get(`api/user/profile/${q}`)).data;c.value={Vorname:e.firstname,Nachname:e.lastname,Strasse:e.street,Hausnummer:e.house_number,Stadt:e.city,Postleitzahl:e.zip_code,öffnungszeit:e.opening,Betriebsschluss:e.closing,Bankkonto:e.payment},g.value={latitude:e.latitude,longitude:e.longitude},console.log(e)}catch(t){console.error("Error loading blogs:",t)}},P=async()=>{try{const e=await(await S.get(`api/user/profile/${q}`)).data;c.value={Vorname:e.firstname,Nachname:e.lastname,Strasse:e.street,Hausnummer:e.house_number,Stadt:e.city,Postleitzahl:e.zip_code}}catch(t){console.error("Error loading blogs:",t)}};O(()=>{var t;(t=i==null?void 0:i.authUser)!=null&&t.is_seller?U():P()});const T=(t,e)=>{o.value=e,l.value=t,h.value=!0},F=async()=>{if(o.value!==null&&Object.keys(m).find(e=>m[e]===o.value)){c.value[o.value]=l.value;const e=Object.fromEntries(Object.entries(c.value).map(([u,f])=>[Object.keys(m).find(v=>m[v]===u),f]));console.log(e);try{const u=await S.put("/api/user/update-profile",e);console.log("Profile updated:",u.data)}catch(u){console.error("Error updating profile:",u)}}x()},x=()=>{h.value=!1,o.value={},l.value=""},N=t=>t.split(":").length===2?`${t}:00`:t;return(t,e)=>{var f,v,I,z;const u=Z("router-link");return a(),n("div",J,[s("div",W,[X,c.value?(a(!0),n(H,{key:0},K(c.value,(r,y)=>(a(),n("div",{class:"profile-section",key:y},[s("div",{class:"profile-item",onClick:()=>T(r,y)},[s("span",null,w(y),1),s("span",ee,w(r),1)],8,Y)]))),128)):k("",!0),(v=(f=C(i))==null?void 0:f.authUser)!=null&&v.is_seller&&!g.value.latitude&&!g.value.longitude?(a(),n("div",{key:1,class:"profile-item",onClick:e[0]||(e[0]=()=>T(t.value,t.key))},[te,b(u,{to:{name:"map"},class:"link"},{default:$(()=>[se]),_:1})])):k("",!0),(z=(I=C(i))==null?void 0:I.authUser)!=null&&z.is_seller?(a(),n("div",oe,[b(R)])):(a(),n("div",ae,[b(Q)])),h.value?(a(),n("div",ne,[s("form",{onSubmit:A(F,["prevent"])},[s("label",{for:o.value},w(o.value),9,le),o.value==="öffnungszeit"||o.value==="Betriebsschluss"?E((a(),n("input",{key:0,type:"time","onUpdate:modelValue":e[1]||(e[1]=r=>l.value=r),id:o.value,required:"",onChange:e[2]||(e[2]=r=>l.value=N(r.target.value))},null,40,ie)),[[V,l.value]]):E((a(),n("input",{key:1,type:"text","onUpdate:modelValue":e[3]||(e[3]=r=>l.value=r),id:o.value,required:""},null,8,re)),[[V,l.value]]),ue,s("button",{type:"button",onClick:x},"Ablehnen")],32)])):k("",!0)])])}}},ve=j(ce,[["__scopeId","data-v-e597f62d"]]);export{ve as default};
