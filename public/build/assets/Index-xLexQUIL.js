import{_ as se,u as oe,r,E as ie,a as T,o as n,c as a,b,d as e,f as I,v as M,F as _,s as y,i as ne,q as g,t as u,w as A,e as S,x as ae,j as B,G as L,g as re,n as j,p as le,h as ce,S as c}from"./app-D8tagWsk.js";import{u as de,H as ue}from"./Header-BmOdKlL7.js";import{F as me}from"./FooterUser-Di210AOo.js";/* empty css                                                                   */const m=q=>(le("data-v-56160386"),q=q(),ce(),q),he={class:"bg-white container"},pe={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},ve={"aria-labelledby":"products-heading",class:"pb-24 pt-6"},_e={class:"prise-form"},ge={class:"hidden lg:block"},fe={class:"flex items-center justify-between space-x-3"},we=m(()=>e("h3",{class:"sr-only"},"Preis:",-1)),xe={class:"basis-1/3"},be=m(()=>e("label",{for:"filters-price-from",class:"mb-2 block text-sm font-medium text-gray-900 dark:text-white"},"Von",-1)),ye={class:"basis-1/3"},qe=m(()=>e("label",{for:"filters-price-to",class:"mb-2 block text-sm font-medium text-gray-900 dark:text-white"},"Bis",-1)),Ce={class:"lg:col-span-3"},ke={class:"product-list"},Te={class:"product-info"},Be={key:0},Pe={key:1},Ze=["src"],Ie={class:"product-actions"},Me=["onClick"],Se=m(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#298E46"},[e("path",{d:"M480-320q75 0 127.5-52.5T660-500q0-75-52.5-127.5T480-680q-75 0-127.5 52.5T300-500q0 75 52.5 127.5T480-320Zm0-72q-45 0-76.5-31.5T372-500q0-45 31.5-76.5T480-608q45 0 76.5 31.5T588-500q0 45-31.5 76.5T480-392Zm0 192q-146 0-266-81.5T40-500q54-137 174-218.5T480-800q146 0 266 81.5T920-500q-54 137-174 218.5T480-200Zm0-300Zm0 220q113 0 207.5-59.5T832-500q-50-101-144.5-160.5T480-720q-113 0-207.5 59.5T128-500q50 101 144.5 160.5T480-280Z"})],-1)),$e=[Se],Ee=["onClick"],Fe=m(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#298E46"},[e("path",{d:"m363-390 117-71 117 71-31-133 104-90-137-11-53-126-53 126-137 11 104 90-31 133ZM80-80v-720q0-33 23.5-56.5T160-880h640q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240H240L80-80Zm126-240h594v-480H160v525l46-45Zm-46 0v-480 480Z"})],-1)),He=[Fe],Re=["onClick","disabled"],Ue=m(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#298E46"},[e("path",{d:"M240-80q-33 0-56.5-23.5T160-160v-480q0-33 23.5-56.5T240-720h80q0-66 47-113t113-47q66 0 113 47t47 113h80q33 0 56.5 23.5T800-640v480q0 33-23.5 56.5T720-80H240Zm0-80h480v-480h-80v80q0 17-11.5 28.5T600-520q-17 0-28.5-11.5T560-560v-80H400v80q0 17-11.5 28.5T360-520q-17 0-28.5-11.5T320-560v-80h-80v480Zm160-560h160q0-33-23.5-56.5T480-800q-33 0-56.5 23.5T400-720ZM240-160v-480 480Z"})],-1)),Ve=[Ue],Ke={class:"broadcast"},Ne={class:"carousel__item"},Ae=["src"],Le={class:"review-section"},je=m(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#298E46"},[e("path",{d:"m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"})],-1)),De=[je],Qe={class:"stars"},ze=["src"],Ge={class:"review-header"},Oe=["onClick"],We={class:"comment-box"},Xe=m(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",height:"40px",viewBox:"0 -960 960 960",width:"40px",fill:"#298E46"},[e("path",{d:"M120-160v-640l760 320-760 320Zm66.67-102 520.66-218-520.66-220v158.67L428-480l-241.33 60v158Zm0 0v-438 438Z"})],-1)),Je=[Xe],Ye={class:"comments-list"},et={class:"comment-part"},tt=["onClick"],st={key:0,xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#EA3323"},ot=m(()=>e("path",{d:"M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"},null,-1)),it=[ot],nt={class:"footer"},at={__name:"Index",props:{products:Array},setup(q){const f=oe(),D=ne().currentRoute.value.params.id,$=r([]),E=r([]),w=r({prices:[0,1e4]});r(!1);const P=r(!1),F=r([]),Q=async()=>{try{const t=await g.get(`/api/product/${D}`);$.value=t.data.products.data,H()}catch(t){console.error("Failed to fetch Product:",t)}},H=()=>{const[t,s]=w.value.prices,d=$.value.filter(l=>l.product_images.length>0);E.value=d.filter(l=>l.price>=t&&l.price<=s)},z=t=>{F.value=t.product_images,P.value=!0},G=()=>{P.value=!1};function R(t){return t.product_images&&t.product_images.length>0?`/${t.product_images[0].image}`:"../assets/Placeholder-enterprise.png"}ie(()=>{Q()});const{addToCart:O,getExistingProduct:W}=de(),X=t=>{const s=W(t.id);if(s&&s.quantity>=t.quantity){c.fire({toast:!0,icon:"error",position:"top-end",showConfirmButton:!1,title:"Ihr Wahl ist mehr als übrige Quantität: ",timer:3e3});return}else if(t.quantity<=2)c.fire({toast:!0,icon:"info",position:"top-end",showConfirmButton:!1,title:"Beachten Sie übrige Quantität: ",timer:3e3});else if(t.quantity<1)return;const d=document.querySelector('meta[name="csrf-token"]').getAttribute("content");g.post(`/api/cart/store/${t.id}`,t,{quantity:t.quantity,price:t.price,seller_id:t.seller_id},{headers:{"Content-Type":"multipart/form-data","X-CSRF-TOKEN":d}}).then(l=>{const x=l.data.flash;t.quantity>2&&x&&x.success&&c.fire({toast:!0,icon:"success",position:"top-end",showConfirmButton:!1,title:x.success,timer:3e3}),O(t)}).catch(l=>{console.error("Error adding to cart:",l)})},h=r([]),U=r(0),Z=r(!1),C=r({}),p=r(""),v=r(0),k=async t=>{C.value=t;try{const s=await g.get(`/api/product-review/${t.id}`);h.value=s.data,console.log(h.value),J(),Z.value=!0}catch(s){console.error("Failed to fetch reviews:",s)}},V=()=>{Z.value=!1,v.value=0},J=()=>{const t=h.value.reduce((s,d)=>s+d.rating,0);U.value=h.value.length?(t/h.value.length).toFixed(1):0},K=async t=>{if(!f.authUser){c.fire({toast:!0,icon:"info",position:"top-end",showConfirmButton:!1,title:"Melden Sie sich an!",timer:3e3});return}if(!p.value.trim()&&!v.value){c.fire({toast:!0,icon:"warning",position:"top-end",showConfirmButton:!1,title:"entweder Sterne oder Komment is leer!",timer:3e3});return}document.querySelector('meta[name="csrf-token"]').getAttribute("content");try{p.value.trim()&&(await g.post("/api/product-comment",{user_id:f.authUser.id,product_id:t.id,comment:p.value}),await k(t),c.fire({toast:!0,icon:"success",position:"top-end",showConfirmButton:!1,title:"Ihr Komment wurde gepostet!",timer:3e3})),v.value&&(await g.post("/api/product-rating",{user_id:f.authUser.id,product_id:t.id,rating:v.value}),await k(t),c.fire({toast:!0,icon:"success",position:"top-end",showConfirmButton:!1,title:"Ihre Bewertung wurde gepostet!",timer:3e3})),p.value=""}catch(s){console.error("Failed to submit comment or rating:",s),c.fire({toast:!0,icon:"error",position:"top-end",showConfirmButton:!1,title:"Komment oder Bewertung wurde nicht gepostet!"})}},Y=async(t,s)=>{try{await g.delete(`/api/product-review/${t.id}`),await k(s),c.fire({toast:!0,icon:"success",position:"top-end",showConfirmButton:!1,title:"Ihre Komment wurde gelöscht!",timer:3e3})}catch(d){console.error("Failed to delete comment:",d),c.fire({toast:!0,icon:"error",position:"top-end",showConfirmButton:!1,title:"Komment wurde nicht gelöscht!"})}},ee=t=>{v.value=t};return(t,s)=>{const d=T("Slide"),l=T("Navigation"),x=T("Pagination"),te=T("Carousel");return n(),a(_,null,[b(ue),e("div",he,[e("main",pe,[e("section",ve,[e("div",_e,[e("form",ge,[e("div",fe,[we,e("div",xe,[be,I(e("input",{type:"number",id:"filters-price-from",placeholder:"Min price","onUpdate:modelValue":s[0]||(s[0]=i=>w.value.prices[0]=i),class:"block w-full rounded-lg border border-gray-300"},null,512),[[M,w.value.prices[0]]])]),e("div",ye,[qe,I(e("input",{type:"number",id:"filters-price-to",placeholder:"Max price","onUpdate:modelValue":s[1]||(s[1]=i=>w.value.prices[1]=i),class:"block w-full rounded-lg border border-gray-300"},null,512),[[M,w.value.prices[1]]])]),e("div",{class:"basis-1/3"},[e("button",{type:"button",onClick:H,class:"bt-1 mt-6 w-full rounded-lg bg-blue-500 px-4 py-2 text-white hover:bg-blue-700"},"Verwenden")])])])])]),e("div",Ce,[e("div",ke,[(n(!0),a(_,null,y(E.value,i=>(n(),a("div",{key:i.id,class:"product-card"},[e("div",Te,[e("p",null,u(i.name),1),e("p",null,u(i.quantity)+" übrig",1),i.amount?(n(),a("p",Be,u(i.price)+"CHF /"+u(i.amount)+u(i.mass_unit),1)):(n(),a("p",Pe,u(i.price)+"CHF /"+u(i.mass_unit),1))]),e("img",{src:R(i),alt:"Product Image",class:"product-image"},null,8,Ze),e("div",Ie,[e("button",{class:"product-buttons",onClick:o=>z(i)},$e,8,Me),e("button",{class:"product-buttons",onClick:o=>k(i)},He,8,Ee),e("button",{onClick:o=>X(i),disabled:i.quantity<1},Ve,8,Re)]),P.value?(n(),a("div",{key:0,class:"popupImages",onClick:s[2]||(s[2]=A(o=>G(),["self"]))},[e("div",Ke,[b(te,null,{addons:S(()=>[b(l),b(x)]),default:S(()=>[(n(!0),a(_,null,y(F.value,(o,N)=>(n(),ae(d,{key:o.id},{default:S(()=>[e("div",Ne,[e("img",{src:`/${o.image}`,alt:"Product Image",class:"slider-image"},null,8,Ae)])]),_:2},1024))),128))]),_:1})])])):B("",!0),Z.value&&C.value.id===i.id?(n(),a("div",{key:1,class:"popupReviews",onClick:s[6]||(s[6]=A(o=>V(),["self"]))},[e("div",Le,[e("div",{onClick:V,class:"close-label"},De),e("div",Qe,[(n(),a(_,null,y(5,o=>e("span",{key:o,class:L(["star",{filled:o<=U.value}])},"★",2)),64))]),e("img",{src:R(i),alt:"Product Image",class:"product-image"},null,8,ze),e("div",Ge,[e("div",{class:"stars review",onClick:s[3]||(s[3]=o=>K(C.value))},[(n(),a(_,null,y(5,o=>e("span",{key:o,class:L(["star star-rating",{filled:o<=v.value}]),onClick:N=>ee(o)}," ★ ",10,Oe)),64))])]),e("div",We,[I(e("textarea",{"onUpdate:modelValue":s[4]||(s[4]=o=>p.value=o),placeholder:"Komment schreiben ..."},null,512),[[M,p.value]]),e("label",{onClick:s[5]||(s[5]=o=>K(C.value))},Je)]),e("div",Ye,[(n(!0),a(_,null,y(h.value.filter(o=>o.comment&&o.comment.trim()!==""),o=>(n(),a("div",{key:o.id,class:"comment"},[e("div",et,[e("p",null,[e("strong",null,u(o.user.firstname)+":",1),re(" "+u(o.comment),1)])]),o.user_id&&j(f).authUser?(n(),a("div",{key:0,class:"bin",onClick:N=>Y(o,i)},[o.user_id==j(f).authUser.id?(n(),a("svg",st,it)):B("",!0)],8,tt)):B("",!0)]))),128))])])])):B("",!0)]))),128))])])])]),e("div",nt,[b(me)])],64)}}},mt=se(at,[["__scopeId","data-v-56160386"]]);export{mt as default};
